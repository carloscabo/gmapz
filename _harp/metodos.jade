include ./includes/mixins.jade
.main-content
  .row
    .container
      h2.page-header Métodos
      p.
        A continuación dispones de los ejemplos más habituales para configurar un mapa con <b>GMapz</b>, y diferentes opciones de configuración. También dispones de un ejemplo que incorpora <b>agrupación automática de markers</b>.
#sample-1.mb32
  .row
    .container
      h2 GMapz
        small &nbsp;&nbsp;&nbsp;(gmapz.js)
      .row.container
        p <code><b>GMapz.debug = true;</b></code><br>Activa / desactiva los mensajes de info / error / warning en la consola.
      .row.container
        p <code><b>GMapz.requestAPI( callback_function );</b></code><br>Incrusta en la página la API de google.maps y cuando está lista llama a <code>callback_function</code>, por defecto <code>GMapz.onApiReady</code>.
      .row
        .col-lg-6
          p.
            <code><b>GMapz.onGoogleMapsReady</b></code><br>Método que se ejecuta cuando la API de google.maps está disponible, puede emplearse para ejecutar código propio (ver ejemplo a la derecha).
        .col-lg-6
          p.
          pre.prettyprint
            +escape()
              | GMapz.onGoogleMapsReady = function() {
              |   // Yout custom code here
              | }
      .row.container
        p <code><b>GMapz.getOppositeCorner( center_lat, center_lng, northeast_lat, northeast_lat );</b></code><br>Devuelve la esquina opuesta de un cuadrado imaginario cuyo centro es <code>center_lat, center_lng</code>, y una de sus esquinas <code>northeast_lat, northeast_lat</code>. Devuelve un <b>objeto LatLng de google.maps</b>.
      .row.container
        p <code><b>GMapz.serializeBounds( google_maps_bounds_obj );</b></code><br>Pasándole un objeto bounds de google.maps devuelve un string serializado con la forma: <code>'sw_lat, sw_lng, ne_lat, ne_lng'</code>.
      .row.container
        p <code><b>GMapz.attachActionButtons();</b></code><br>Busca en la página los elementos con el <b>data-attribute</b> <code>data-gmapz...</code>, y les asigna la <a href="data_attributes.html">funcionalidad correspondiente</a>.
    .container
      h2 Maps
        small &nbsp;&nbsp;&nbsp;(gmapz.map.js)
      h3 Constructor
      .row
        .col-lg-6
          p.
            <code><b>var my_map = new GMpaz.map( $(element), options );</b></code><br>Crear una nueva instancia de GMapz.map, debemos proporcionar un selector de JQuery, las opciones de configuración de google.maps y opcionalmente un objeto con la lista de ubicaciones.
          p.
            <mark>Si necesitamos acceder directamente al objeto de <b>google.maps</b> podemos hacerlo a través de <code>my_map.map</code></mark>
        .col-lg-6
          p.
          pre.prettyprint
            +escape()
              | var my_map = new GMapz.map(
              |   $('#map-sample-1'), // JQuery selector
              |   google_maps_options,
              |   locations_object // Optional
              | );
      h3 Eventos del mapa
      .row
        .col-lg-6
          p.
            <code><b>my_map.onReady();</b></code><br>Se ejecuta una vez el mapa está inicializado, y sus métodos están diponibles.
          p.
            <mark><b>CUIDADO:</b> Que el objeto esté creado no quiere decir que ya esté <em>pintado</em>, los métodos de google maps relativos a la visualización pueden no estár diponibles, por ejemplo <code>my_map.map.getZoom();</code></mark>
        .col-lg-6
          p.
          pre.prettyprint
            +escape()
              | my_map.onReady = function(){
              |   // this = google.maps instance
              |   this.addLocations( locations_obj );
              | }
      .row
        .col-lg-6
          p.
            <code><b>my_map.onDraw();</b></code><br>Se ejecuta una vez el mapa está dibujado. En este momento todas las propiedades del mapa deberían estar disponibles y deberían poder actualizarse.
        .col-lg-6
          p.
          pre.prettyprint
            +escape()
              | my_map.onDraw = function(){
              |   // this = google.maps instance
              | }
      h3 Métodos del mapa
      .row.container
        p <code><b>my_map.addLocations( locations_obj );</b></code><br>Añade las ubicaciones al mapa y les asigna el <em>pin</em> correspondiente. Consulta el <a href="index.html">formato de localizaciones y pins</a>.
        p
          mark.
            Si necesitas acceder a los marcadores puede hacerlo a traves de <code>my_map.markers</code>, los infowindows se encuentran en <code>my_map.iws</code>.
      .row.container
        p <code><b>my_map.deleteMarkers( marker_group_array );</b></code><br>Elimina las localizaciones y sus infowindows de los índice indicados en <code>marker_group_array</code>.
      .row.container
        p <code><b>my_map.deleteAllMarkers();</b></code><br>Elimina todas las localizaciones y sus infowindows del mapa actual.
      .row.container
        p <code><b>my_map.setZoom( zoom );</b></code><br>Cambia el zoom del mapa.
      .row.container
        p <code><b>my_map.getZoom();</b></code><br>Devuelve el zoom actual.
      .row.container
        p <code><b>my_map.centerTo( lat, lng, zoom );</b></code><br>Centra el mapa en las coordenadas <b>lat, lng</b>, el parámetro <b>zoom es opcional</b>.
      .row.container
        p <code><b>my_map.centerToMarker( marker_idx, zoom );</b></code><br>Centra el mapa en el marcador con la key <b>_marker_idx</b>, el parámetro <b>zoom es opcional</b>.
      .row.container
        p <code><b>my_map.fitBounds( marker_group_array );</b></code><br>Ajusta la vista del mapa al grupo de marcadores en <code>marker_group_array</code>. Si no se pasa ningún marcador <b>ajustará la vista de forma que se vean todos los marcadores disponibles en el mapa (que estén visibles)</b>.
      .row.container
        p <code><b>my_map.showMarkerGroup( marker_group_array, hide_rest );</b></code><br>Muestra el grupo de marcadores en <code>marker_group_array</code>, automáticamente centra el mapa en el grupo. Si se pasa <b>true</b> en el parámetro <code>hide_rest</code> ocultará todos los marker que <b>no estén el el grupo</b>.
      .row.container
        p <code><b>my_map.openInfoWindow( marker_idx );</b></code><br>Muestra el infowindow correspondiente al key.
      .row.container
        p <code><b>my_map.closeInfoWindow( marker_idx );</b></code><br>Oculta el infowindow correspondiente al key.
      .row.container
        p <code><b>my_map.closeAllInfoWindows();</b></code><br>Oculta <b>todos</b> los infowindowa del mapa.
