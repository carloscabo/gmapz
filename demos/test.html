<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>

  <link rel="stylesheet" href="css/demo_stylesheet.css">

  <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.3.min.js"></script>

  <!-- THIRD PARTY LIBS -->
  <script src="../src/lib/MQBE.1.04.js"></script>
  <script src="../src/lib/markerclusterer.js"></script>

  <!-- GMAPZ -->
  <script src="../src/gmapz.js"></script>
  <script src="../src/gmapz.pins.js"></script>
  <script src="../src/gmapz.map.js"></script>

  <!-- DEMO INCLUDES -->
  <script src="js/demo_locations.js"></script>

</head>
<body>

<div class="wrapper">

  <table>
    <tr>
      <td>
        <a href="#" data-gmapz-target="gz-123456789" data-gmapz-show-group='[1,289,38,3,6,7,9,10]' data-gmapz-hide-rest="true">Show group A</a><br>
        <a href="#" data-gmapz-target="gz-123456789" data-gmapz-show-group='[2,"garajonay","teide",12]'>Show group B</a><br>
        <a href="#" data-gmapz-target="gz-123456789" data-gmapz-show-group='[5,"picos_de_europa"]'>Show group C</a><br>
        <a href="#" data-gmapz-target="gz-123456789" data-gmapz-center-idx="teide" data-gmapz-zoom="12" >Center view on marker and zoom</a><br>
        <a href="#" data-gmapz-target="gz-123456789" data-gmapz-show-all >Show all markers</a>
      </td>
      <td>
        <select name="" id="" data-gmapz-target="gz-123456789">
          <option value="0">Select marker group</option>
          <option data-gmapz-show-group='[1,289,38,3,6,7,9,10]'>Show group A</option>
          <option data-gmapz-show-group='[2,"garajonay","teide",12]' data-gmapz-hide-rest="true">Show group B</option>
          <option data-gmapz-show-group='[5,"picos_de_europa"]'>Show group C</option>
          <option data-gmapz-center-idx="teide" data-gmapz-zoom="12">Center view on marker and zoom</option>
          <option data-gmapz-show-all>Show all markers</option>
        </select>
      </td>
      <td>
        <a href="#" id="js-add-markers-1">Add new markers</a><br>
        <a href="#" id="js-delete-markers-1">Delete markers</a><br>
        <a href="#" id="js-update-marker-1">Update marker</a>
      </td>
      <td>
        <input type="text" placeholder="Introduce tu dirección"><br>
        <button data-gmapz-target="gz-123456789" data-gmapz-find-near-address>Buscar más cercano</button>
        <br><br>
        <a href="#" data-gmapz-target="gz-123456789" data-gmapz-find-near >Find nearest to my location</a>
      </td>
    </tr>
  </table>

  <div id="map-1" data-gmapz="gz-123456789" class="map">Maps goes here</div>

  <hr>
  <!-- <div id="map-2" class="map">Maps goes here</div> -->

  <table>
    <tr>
      <td>
        <a href="#" data-gmapz-target="gz-france-populated-cities" data-gmapz-show-all >Show all markers</a>
      </td>
    </tr>
  </table>

  <div id="map-2" data-gmapz="gz-france-populated-cities" class="map">Maps goes here</div>

  <hr>

  <div id="map-3" data-gmapz="gz-main-cities-italy" class="map">Maps goes here</div>


</div>

  <script>

  var
    locs,
    map1,
    map2;

  $(document).ready(function() {
    // La magia aquí!

    // Map 1 *****************************************

    var map1_options = {
      // Options here
      mapTypeId: 'SATELLITE', // 'ROADMAP' / 'SATELLITE' / 'HYBRID' / 'TERRAIN'... caps
      // bounds: [ nw_lat, mw_lng, se_lat, sw_lng ],
      center: [40.4165, -3.7025],
      zoom: 2
    };

    map1 = new GMapz.map(
      $('#map-1'),
      map1_options,
      locs
    );

    map1.onReady = function() {
      this.setZoom(5);
    };

    $('#js-add-markers-1').on('click', function(e) {
      e.preventDefault();
      map1.addLocations(morocco);
    });
    $('#js-delete-markers-1').on('click', function(e) {
      e.preventDefault();
      map1.deleteMarkers(['FEZ','ORAN',12]);
    });
    $('#js-update-marker-1').on('click', function(e) {
      e.preventDefault();
      map1.addLocations(update);
    });

    // Map 2 *****************************************

    var map2_options = {
      // Options here
      mapTypeId: 'ROADMAP', // 'ROADMAP' / 'SATELLITE' / 'HYBRID' / 'TERRAIN'... caps
      center: [48, 2],
      zoom: 5
    };

    map2 = new GMapz.map(
      $('#map-2'),
      map2_options,
      france_cities
    );

    var marker_cluster_style = [{
          textColor: 'white',
          url: 'img/gmapz/pin-cluster.png',
          height: 48,
          width: 48,
          textSize: '17',
          backgroundPosition: '0 0'
          // anchorIcon: [-24.0, -48.0] // This propoerty its not supported actually
        }];

    map2.onReady = function() {
      // Convert markers object, into array
      markers_array = $.map(this.markers, function(val, idx){
        return [val];
      });
      this.marker_cluster = new MarkerClusterer(
        this.map,
        markers_array, {
          gridSize: 100,
          maxZoom: 15,
          styles: marker_cluster_style
        }
      );
    };

    var map3_options = {
      // Options here
      mapTypeId: 'ROADMAP', // 'ROADMAP' / 'SATELLITE' / 'HYBRID' / 'TERRAIN'... caps
      center: [41.8919, 12.5113],
      zoom: 9,
      styles: [{"featureType":"landscape.natural","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"color":"#e0efef"}]},{"featureType":"poi","elementType":"geometry.fill","stylers":[{"visibility":"on"},{"hue":"#1900ff"},{"color":"#c0e8e8"}]},{"featureType":"road","elementType":"geometry","stylers":[{"lightness":100},{"visibility":"simplified"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"transit.line","elementType":"geometry","stylers":[{"visibility":"on"},{"lightness":700}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#7dcdcd"}]}]
    };

    // Map 3 *****************************************

    map3 = new GMapz.map(
      $('#map-3'),
      map3_options
    );

    map3.onReady = function() {
      var
        that = this;
      this.addLocations(italy_cities);
      this.addScrollControl();

      MQBE.on('enter', 'mobile', function() {
        map3.lockScroll();
      }).on('leave', 'mobile', function() {
        map3.resumeScroll();
      });
    };

    // Attach button with data-gmapz attribute
    GMapz.attachActionButtons();

    // Init media query events
    MQBE.init();

    // map1.addLocations(morocco);
    // map1.fitAll();
    // map1.fitLocations();
    // $('#map-1')[0].gmapz.addLocations(  )
    // console.log(map1);
    // $('#map-1')[0].gmapz.testMethod('eo2');
    // map1.gz_settings.test_str = 'ojete';
    // console.log($('#map-1')[0].gmapz.gz_settings.test_str);

  });
  </script>

</body>
</html>
